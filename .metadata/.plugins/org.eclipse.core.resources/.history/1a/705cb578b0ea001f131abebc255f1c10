/*
******************************************************************************
**
** @file        : LinkerScript.ld
**
** @author      : Auto-generated by STM32CubeIDE
**
** @brief       : Linker script for STM32F103RBTx Device from STM32F1 series
**                      128Kbytes FLASH
**                      20Kbytes RAM
**
**                Set heap size, stack size and stack location according
**                to application requirements.
**
**                Set memory bank area and size if external memory is used
**
**  Target      : STMicroelectronics STM32
**
**  Distribution: The file is distributed as is, without any warranty
**                of any kind.
**
******************************************************************************
** @attention
**
** <h2><center>&copy; Copyright (c) 2025 STMicroelectronics.
** All rights reserved.</center></h2>
**
** This software component is licensed by ST under BSD 3-Clause license,
** the "License"; You may not use this file except in compliance with the
** License. You may obtain a copy of the License at:
**                        opensource.org/licenses/BSD-3-Clause
**
******************************************************************************
*/

/* Entry Point */
/* Entry Point */
ENTRY(Reset_Handler)

/* Define Bootloader & User Application Memory */
MEMORY
{
  RAM    (xrw)    : ORIGIN = 0x20000000,   LENGTH = 20K
  FLASH_BOOT (rx) : ORIGIN = 0x08000000,   LENGTH = 16K   /* Bootloader: 16KB */
  FLASH_APP  (rx) : ORIGIN = 0x08004000,   LENGTH = 112K  /* User App: 112KB */
}

/* Sections */
SECTIONS
{
  /* Bootloader Vector Table */
  .isr_vector :
  {
    . = ALIGN(4);
    KEEP(*(.isr_vector)) /* Startup code */
    . = ALIGN(4);
  } >FLASH_BOOT

  /* Bootloader Code */
  .bootloader :
  {
    . = ALIGN(4);
    *(.text.bootloader)   /* Bootloader code */
    *(.rodata.bootloader) /* Bootloader read-only data */
    . = ALIGN(4);
  } >FLASH_BOOT

  /* User Application Code */
  .user_application :
  {
    . = 0x08004000;  /* Force user application to start at 0x08004000 */
    *(.text.user_app)       /* User application code */
    *(.rodata.user_app)     /* User application read-only data */
    . = ALIGN(4);
  } >FLASH_APP

  /* Data section */
  _sidata = LOADADDR(.data);
  .data :
  {
    . = ALIGN(4);
    _sdata = .;
    *(.data)
    *(.data*)
    . = ALIGN(4);
    _edata = .;
  } >RAM AT> FLASH_APP

  /* Uninitialized data */
  .bss :
  {
    _sbss = .;
    *(.bss)
    *(.bss*)
    *(COMMON)
    . = ALIGN(4);
    _ebss = .;
  } >RAM

  /* Heap & Stack */
  _Min_Heap_Size = 0x400;
  _Min_Stack_Size = 0x800;
}

